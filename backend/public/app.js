var e,t,n,o,r={},i=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(e,t){for(var n in t)e[n]=t[n];return e}function s(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n){var o,r,i,l=arguments,a={};for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:a[i]=t[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(l[i]);if(null!=n&&(a.children=n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return c(e,a,o,r,null)}function c(t,n,o,r,i){var l={type:t,props:n,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++e.__v:i};return null!=e.vnode&&e.vnode(l),l}function _(e){return e.children}function p(e,t){this.props=e,this.context=t}function d(e,t){if(null==t)return e.__?d(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?d(e):null}function f(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return f(e)}}function m(r){(!r.__d&&(r.__d=!0)&&t.push(r)&&!h.__r++||o!==e.debounceRendering)&&((o=e.debounceRendering)||n)(h)}function h(){for(var e;h.__r=t.length;)e=t.sort((function(e,t){return e.__v.__b-t.__v.__b})),t=[],e.some((function(e){var t,n,o,r,i,l;e.__d&&(i=(r=(t=e).__v).__e,(l=t.__P)&&(n=[],(o=a({},r)).__v=r.__v+1,S(l,r,o,t.__n,void 0!==l.ownerSVGElement,null!=r.__h?[i]:null,n,null==i?d(r):i,r.__h),x(n,r),r.__e!=i&&f(r)))}))}function g(e,t,n,o,l,a,s,u,p,f){var m,h,g,w,k,b,C,x=o&&o.__k||i,H=x.length;for(n.__k=[],m=0;m<t.length;m++)if(null!=(w=n.__k[m]=null==(w=t[m])||"boolean"==typeof w?null:"string"==typeof w||"number"==typeof w||"bigint"==typeof w?c(null,w,null,null,w):Array.isArray(w)?c(_,{children:w},null,null,null):w.__b>0?c(w.type,w.props,w.key,null,w.__v):w)){if(w.__=n,w.__b=n.__b+1,null===(g=x[m])||g&&w.key==g.key&&w.type===g.type)x[m]=void 0;else for(h=0;h<H;h++){if((g=x[h])&&w.key==g.key&&w.type===g.type){x[h]=void 0;break}g=null}S(e,w,g=g||r,l,a,s,u,p,f),k=w.__e,(h=w.ref)&&g.ref!=h&&(C||(C=[]),g.ref&&C.push(g.ref,null,w),C.push(h,w.__c||k,w)),null!=k?(null==b&&(b=k),"function"==typeof w.type&&null!=w.__k&&w.__k===g.__k?w.__d=p=v(w,p,e):p=y(e,w,g,x,k,p),f||"option"!==n.type?"function"==typeof n.type&&(n.__d=p):e.value=""):p&&g.__e==p&&p.parentNode!=e&&(p=d(g))}for(n.__e=b,m=H;m--;)null!=x[m]&&("function"==typeof n.type&&null!=x[m].__e&&x[m].__e==n.__d&&(n.__d=d(o,m+1)),E(x[m],x[m]));if(C)for(m=0;m<C.length;m++)A(C[m],C[++m],C[++m])}function v(e,t,n){var o,r;for(o=0;o<e.__k.length;o++)(r=e.__k[o])&&(r.__=e,t="function"==typeof r.type?v(r,t,n):y(n,r,r,e.__k,r.__e,t));return t}function y(e,t,n,o,r,i){var l,a,s;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||r!=i||null==r.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(r),l=null;else{for(a=i,s=0;(a=a.nextSibling)&&s<o.length;s+=2)if(a==r)break e;e.insertBefore(r,i),l=i}return void 0!==l?l:r.nextSibling}function w(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||l.test(t)?n:n+"px"}function k(e,t,n,o,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||w(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||w(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o||e.addEventListener(t,i?C:b,i):e.removeEventListener(t,i?C:b,i);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function b(t){this.l[t.type+!1](e.event?e.event(t):t)}function C(t){this.l[t.type+!0](e.event?e.event(t):t)}function S(t,n,o,l,u,c,d,f,m){var h,v,y,w,b,C,S,x,A,E,L,z=n.type;if(void 0!==n.constructor)return null;null!=o.__h&&(m=o.__h,f=n.__e=o.__e,n.__h=null,c=[f]),(h=e.__b)&&h(n);try{e:if("function"==typeof z){if(x=n.props,A=(h=z.contextType)&&l[h.__c],E=h?A?A.props.value:h.__:l,o.__c?S=(v=n.__c=o.__c).__=v.__E:("prototype"in z&&z.prototype.render?n.__c=v=new z(x,E):(n.__c=v=new p(x,E),v.constructor=z,v.render=H),A&&A.sub(v),v.props=x,v.state||(v.state={}),v.context=E,v.__n=l,y=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=z.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=a({},v.__s)),a(v.__s,z.getDerivedStateFromProps(x,v.__s))),w=v.props,b=v.state,y)null==z.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==z.getDerivedStateFromProps&&x!==w&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(x,E),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(x,v.__s,E)||n.__v===o.__v){v.props=x,v.state=v.__s,n.__v!==o.__v&&(v.__d=!1),v.__v=n,n.__e=o.__e,n.__k=o.__k,n.__k.forEach((function(e){e&&(e.__=n)})),v.__h.length&&d.push(v);break e}null!=v.componentWillUpdate&&v.componentWillUpdate(x,v.__s,E),null!=v.componentDidUpdate&&v.__h.push((function(){v.componentDidUpdate(w,b,C)}))}v.context=E,v.props=x,v.state=v.__s,(h=e.__r)&&h(n),v.__d=!1,v.__v=n,v.__P=t,h=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(l=a(a({},l),v.getChildContext())),y||null==v.getSnapshotBeforeUpdate||(C=v.getSnapshotBeforeUpdate(w,b)),L=null!=h&&h.type===_&&null==h.key?h.props.children:h,g(t,Array.isArray(L)?L:[L],n,o,l,u,c,d,f,m),v.base=n.__e,n.__h=null,v.__h.length&&d.push(v),S&&(v.__E=v.__=null),v.__e=!1}else null==c&&n.__v===o.__v?(n.__k=o.__k,n.__e=o.__e):n.__e=function(e,t,n,o,l,a,u,c){var _,p,d,f,m=n.props,h=t.props,v=t.type,y=0;if("svg"===v&&(l=!0),null!=a)for(;y<a.length;y++)if((_=a[y])&&(_===e||(v?_.localName==v:3==_.nodeType))){e=_,a[y]=null;break}if(null==e){if(null===v)return document.createTextNode(h);e=l?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,h.is&&h),a=null,c=!1}if(null===v)m===h||c&&e.data===h||(e.data=h);else{if(a=a&&i.slice.call(e.childNodes),p=(m=n.props||r).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!c){if(null!=a)for(m={},f=0;f<e.attributes.length;f++)m[e.attributes[f].name]=e.attributes[f].value;(d||p)&&(d&&(p&&d.__html==p.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,o,r){var i;for(i in n)"children"===i||"key"===i||i in t||k(e,i,null,n[i],o);for(i in t)r&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||k(e,i,t[i],n[i],o)}(e,h,m,l,c),d)t.__k=[];else if(y=t.props.children,g(e,Array.isArray(y)?y:[y],t,n,o,l&&"foreignObject"!==v,a,u,e.firstChild,c),null!=a)for(y=a.length;y--;)null!=a[y]&&s(a[y]);c||("value"in h&&void 0!==(y=h.value)&&(y!==e.value||"progress"===v&&!y)&&k(e,"value",y,m.value,!1),"checked"in h&&void 0!==(y=h.checked)&&y!==e.checked&&k(e,"checked",y,m.checked,!1))}return e}(o.__e,n,o,l,u,c,d,m);(h=e.diffed)&&h(n)}catch(t){n.__v=null,(m||null!=c)&&(n.__e=f,n.__h=!!m,c[c.indexOf(f)]=null),e.__e(t,n,o)}}function x(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(e){e.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function A(t,n,o){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,o)}}function E(t,n,o){var r,i,l;if(e.unmount&&e.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||A(r,null,n)),o||"function"==typeof t.type||(o=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){e.__e(t,n)}r.base=r.__P=null}if(r=t.__k)for(l=0;l<r.length;l++)r[l]&&E(r[l],n,o);null!=i&&s(i)}function H(e,t,n){return this.constructor(e,n)}function L(t,n,o){var l,a,s;e.__&&e.__(t,n),a=(l="function"==typeof o)?null:o&&o.__k||n.__k,s=[],S(n,t=(!l&&o||n).__k=u(_,null,[t]),a||r,r,void 0!==n.ownerSVGElement,!l&&o?[o]:a?null:n.firstChild?i.slice.call(n.childNodes):null,s,!l&&o?o:a?a.__e:n.firstChild,l),x(s,t)}function z(e,t){L(e,t,z)}function N(e,t,n){var o,r,i,l=arguments,s=a({},e.props);for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:s[i]=t[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(l[i]);return null!=n&&(s.children=n),c(e.type,s,o||e.key,r||e.ref,null)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function M(e){this.getChildContext=function(){return e.context};var t=e.children,n=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}(e,["context","children"]);return N(t,n)}function j(){var e=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(e),this._vdom=u(M,T({},this._props,{context:e.detail.context}),function e(t,n){if(3===t.nodeType)return t.data;if(1!==t.nodeType)return null;var o=[],r={},i=0,l=t.attributes,a=t.childNodes;for(i=l.length;i--;)"slot"!==l[i].name&&(r[l[i].name]=l[i].value,r[I(l[i].name)]=l[i].value);for(i=a.length;i--;){var s=e(a[i],null),c=a[i].slot;c?r[c]=u($,{name:c},s):o[i]=s}var _=n?u($,null,o):o;return u(n||t.nodeName.toLowerCase(),r,_)}(this,this._vdomComponent)),(this.hasAttribute("hydrate")?z:L)(this._vdom,this._root)}function I(e){return e.replace(/-(\w)/g,(function(e,t){return t?t.toUpperCase():""}))}function U(e,t,n){if(this._vdom){var o={};o[e]=n=null==n?void 0:n,o[I(e)]=n,this._vdom=N(this._vdom,o),L(this._vdom,this._root)}}function P(){L(this._vdom=null,this._root)}function $(e,t){var n=this;return u("slot",T({},e,{ref:function(e){e?(n.ref=e,n._listener||(n._listener=function(e){e.stopPropagation(),e.detail.context=t},e.addEventListener("_preact",n._listener))):n.ref.removeEventListener("_preact",n._listener)}}))}function V(e,t,n,o){function r(){var t=Reflect.construct(HTMLElement,[],r);return t._vdomComponent=e,t._root=o&&o.shadow?t.attachShadow({mode:"open"}):t,t}return(r.prototype=Object.create(HTMLElement.prototype)).constructor=r,r.prototype.connectedCallback=j,r.prototype.attributeChangedCallback=U,r.prototype.disconnectedCallback=P,n=n||e.observedAttributes||Object.keys(e.propTypes||{}),r.observedAttributes=n,n.forEach((function(e){Object.defineProperty(r.prototype,e,{get:function(){return this._vdom.props[e]},set:function(t){this._vdom?this.attributeChangedCallback(e,null,t):(this._props||(this._props={}),this._props[e]=t,this.connectedCallback());var n=typeof t;null!=t&&"string"!==n&&"boolean"!==n&&"number"!==n||this.setAttribute(e,t)}})})),customElements.define(t||e.tagName||e.displayName||e.name,r)}e={__e:function(e,t){for(var n,o,r;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),r=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),r=n.__d),r)return n.__E=n}catch(t){e=t}throw e},__v:0},p.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),"function"==typeof e&&(e=e(a({},n),this.props)),e&&a(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),m(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},p.prototype.render=_,t=[],n="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,h.__r=0;var q,D,O,B=0,F=[],R=e.__b,W=e.__r,J=e.diffed,G=e.__c,K=e.unmount;function Q(t,n){e.__h&&e.__h(D,t,B||n),B=0;var o=D.__H||(D.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({}),o.__[t]}function X(e){return B=1,function(e,t,n){var o=Q(q++,2);return o.t=e,o.__c||(o.__=[n?n(t):le(void 0,t),function(e){var t=o.t(o.__[0],e);o.__[0]!==t&&(o.__=[t,o.__[1]],o.__c.setState({}))}],o.__c=D),o.__}(le,e)}function Y(t,n){var o=Q(q++,3);!e.__s&&ie(o.__H,n)&&(o.__=t,o.__H=n,D.__H.__h.push(o))}function Z(t,n){var o=Q(q++,4);!e.__s&&ie(o.__H,n)&&(o.__=t,o.__H=n,D.__h.push(o))}function ee(e,t){var n=Q(q++,7);return ie(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function te(){F.forEach((function(t){if(t.__P)try{t.__H.__h.forEach(oe),t.__H.__h.forEach(re),t.__H.__h=[]}catch(n){t.__H.__h=[],e.__e(n,t.__v)}})),F=[]}e.__b=function(e){D=null,R&&R(e)},e.__r=function(e){W&&W(e),q=0;var t=(D=e.__c).__H;t&&(t.__h.forEach(oe),t.__h.forEach(re),t.__h=[])},e.diffed=function(t){J&&J(t);var n=t.__c;n&&n.__H&&n.__H.__h.length&&(1!==F.push(n)&&O===e.requestAnimationFrame||((O=e.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(o),ne&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);ne&&(t=requestAnimationFrame(n))})(te)),D=void 0},e.__c=function(t,n){n.some((function(t){try{t.__h.forEach(oe),t.__h=t.__h.filter((function(e){return!e.__||re(e)}))}catch(o){n.some((function(e){e.__h&&(e.__h=[])})),n=[],e.__e(o,t.__v)}})),G&&G(t,n)},e.unmount=function(t){K&&K(t);var n=t.__c;if(n&&n.__H)try{n.__H.__.forEach(oe)}catch(t){e.__e(t,n.__v)}};var ne="function"==typeof requestAnimationFrame;function oe(e){var t=D;"function"==typeof e.__c&&e.__c(),D=t}function re(e){var t=D;e.__c=e.__(),D=t}function ie(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function le(e,t){return"function"==typeof t?t(e):t}function ae({type:e="error",message:t=""}){const n=document.querySelector("alert-render");n&&(n.setAttribute("type",e),n.setAttribute("message",t))}function se({render:e="Messages",state:t}){const n=document.querySelector("messages-render");n&&(n.setAttribute("render",e),t&&(n.setAttribute("id",t.id),n.setAttribute("title",t.title),n.setAttribute("image",t.image),n.setAttribute("text",t.text)))}function ue(e="Messages",t){document.querySelector("side-nav")?.setAttribute("active",e),t&&document.querySelector("side-nav")?.setAttribute("identify","true")}const ce=({size:e="24",color:t="#000"})=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",style:`fill:${t}`},u("path",{d:"M5 15L19 15 12 7z"})),_e=({size:e="24",color:t="#000"})=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",style:`fill:${t}`},u("path",{d:"M11.998 17L18.998 9 4.998 9z"})),pe=({size:e="24",color:t="#000"})=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",style:`fill:${t}`},u("path",{fill:"none",d:"M17.004 20L17.003 8h-1-8-1v12H17.004zM13.003 10h2v8h-2V10zM9.003 10h2v8h-2V10zM9.003 4H15.003V6H9.003z"}),u("path",{d:"M5.003,20c0,1.103,0.897,2,2,2h10c1.103,0,2-0.897,2-2V8h2V6h-3h-1V4c0-1.103-0.897-2-2-2h-6c-1.103,0-2,0.897-2,2v2h-1h-3 v2h2V20z M9.003,4h6v2h-6V4z M8.003,8h8h1l0.001,12H7.003V8H8.003z"}),u("path",{d:"M9.003 10H11.003V18H9.003zM13.003 10H15.003V18H13.003z"})),de=({size:e="24",color:t="#000"})=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",style:`fill:${t}`},u("path",{fill:"none",d:"M16.589 9L15.003 7.414 5.906 16.511 5.377 18.625 7.491 18.097z"}),u("path",{transform:"rotate(134.999 18.003 6)",fill:"none",d:"M16.882 4.879H19.125V7.122H16.882z"}),u("path",{d:"M4.003,21c0.081,0,0.162-0.01,0.242-0.03l4-1c0.176-0.044,0.337-0.135,0.465-0.263L21.003,7.414 c0.378-0.378,0.586-0.88,0.586-1.414s-0.208-1.036-0.586-1.414L19.417,3c-0.756-0.756-2.072-0.756-2.828,0L4.296,15.293 c-0.128,0.128-0.219,0.289-0.263,0.464l-1,4c-0.086,0.341,0.015,0.701,0.263,0.95C3.485,20.897,3.741,21,4.003,21z M18.003,4.414 L19.589,6l-1.586,1.586L16.417,6L18.003,4.414z M5.906,16.511l9.097-9.097L16.589,9l-9.098,9.097l-2.114,0.528L5.906,16.511z"})),fe=({size:e="24",color:t="#000"})=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",style:`fill:${t}`},u("path",{d:"M7 7H17V9H7zM7 11H14V13H7z"}),u("path",{d:"M20,2H4C2.897,2,2,2.897,2,4v18l5.333-4H20c1.103,0,2-0.897,2-2V4C22,2.897,21.103,2,20,2z M20,16H6.667L4,18V4h16V16z"})),me=({size:e="24",color:t="#000"})=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",style:`fill:${t}`},u("path",{d:"M4 6H20V8H4zM4 11H20V13H4zM4 16H20V18H4z"}));function he(e){this.message=e}he.prototype=new Error,he.prototype.name="InvalidCharacterError";var ge="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new he("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,r=0,i=0,l="";o=t.charAt(i++);~o&&(n=r%4?64*n+o:o,r++%4)?l+=String.fromCharCode(255&n>>(-2*r&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return l};function ve(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(ge(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return ge(t)}}function ye(e){this.message=e}ye.prototype=new Error,ye.prototype.name="InvalidTokenError";const we=io({auth:{token:window.localStorage.getItem("token")||""}});function ke(){try{const e=window.localStorage.getItem("token");if(e){const{exp:t,userId:n,admin:o}=function(e,t){if("string"!=typeof e)throw new ye("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(ve(e.split(".")[n]))}catch(e){throw new ye("Invalid token specified: "+e.message)}}(e);return 1e3*t>(new Date).getTime()&&{userId:n,admin:o}}return!1}catch{return window.localStorage.removeItem("token"),!1}}function be(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function Ce({data:e}){return u(_,null,u("div",{className:"comment"},e.map((e=>u(_,null,u("div",{className:"comment-author"},e.user.username),u("p",null,e.content))))))}function Se({title:e,type:t="button",style:n,icon:o,disabled:r=!1,isLoading:i=!1,onClick:l}){const a=["btn"];return n&&a.push(n),u("button",{type:t,disabled:r,onClick:l,className:a.join(" ")},!i&&o&&o,i?"Chargement ...":e)}function xe({type:e="text",label:t,name:n,accept:o,value:r,ref:i,placeholder:l,disabled:a=!1,required:s=!0,onChange:c}){const _=["field-wrapper"];a&&_.push("disabled");const p=t.replace(/\s+/g,"_").toLowerCase();let d;return d=u("div",{className:"inner-wrap"},"textarea"===e?u("textarea",{id:p,name:n,"aria-label":n,value:r,placeholder:l,disabled:a,required:s,onChange:c}):u("input",{id:p,type:e,name:n,accept:o,"aria-label":n,value:r,ref:i,placeholder:l,disabled:a,required:s,onChange:c,autocomplete:"off"})),u("div",{className:_.join(" ")},u("label",{htmlFor:p},t),d)}function Ae({id:e,user:t,userId:n,admin:o,date:r,likes:i,comments:l,title:a,image:s,text:c,deleteArticle:p}){const[d,f]=X(l),[m,h]=X(""),[g,v]=X(!1),[y,w]=X(0),[k,b]=X({like:!1,noLike:!1});async function C(t){const n=y,o=k;ae({});try{const r=await fetch(`/api/like/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")||""}`},body:JSON.stringify({like:t})}),i=await r.json();ae({type:i.type,message:i.message}),"error"===i.type&&(w(n),b(o)),"succes"===i.type&&we.emit("messages",i)}catch{ae({message:"Erreur"})}}return Z((()=>{let e=0;i.forEach((t=>{t.userId===n&&(1===t.like&&b({like:!0,noLike:!1}),0===t.like&&b({like:!1,noLike:!1}),-1===t.like&&b({like:!1,noLike:!0})),e+=t.like})),w(e)}),[]),u("article",null,u("div",{className:"article-vote"},u("div",{onClick:function(){!1===k.like&&(!0===k.noLike?(b({...k,noLike:!1}),w(y+1),C(0)):(b({...k,like:!0}),w(y+1),C(1)))},title:"Like +"},u(ce,{color:!0===k.like?"#1FA564":"#000"})),u("span",null,y),u("div",{onClick:function(){!1===k.noLike&&(!0===k.like?(b({...k,like:!1}),w(y-1),C(0)):(b({...k,noLike:!0}),w(y-1),C(-1)))},title:"Like -"},u(_e,{color:!0===k.noLike?"#DD2419":"#000"}))),u("div",null,u("div",{className:"article-header"},u("a",null,t.username),u("span",null,r)),u("h2",null,a),s&&u("img",{src:s}),u("p",null,c),g?u(_,null,u(Ce,{data:d}),u(xe,{type:"textarea",name:"commentaire",label:"Ajouté votre commentaire :",value:m,onChange:e=>h(e.target.value)}),u("div",{className:"btn-group"},u(Se,{title:"Envoyer",onClick:async function(){if(ae({}),m.length>3)try{const n=await fetch(`/api/comment/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")||""}`},body:JSON.stringify({content:m})}),o=await n.json();ae({type:o.type,message:o.message}),"succes"===o.type&&(f([...d,{user:{username:t.username},content:m}]),h(""),we.emit("messages",o))}catch{ae({message:"Erreur"})}else ae({message:"Le commentaire est trop court"})}}),u(Se,{title:"fermer",onClick:()=>v(!1),style:"danger"}))):u("div",{className:"btn-group"},u(Se,{title:`${d.length} Commentaire${d.length>1?"s":""}`,onClick:()=>v(!0),icon:u(fe,{color:"#fff",size:"12"})}),(t.id===n||o)&&u(_,null,u(Se,{title:"Modifier",onClick:()=>{document.querySelector("side-nav")?.setAttribute("active","Rédaction"),se({render:"Modification",state:{id:e,title:a,image:s,text:c}})},style:"succes",icon:u(de,{color:"#fff",size:"12"})}),u(Se,{title:"Supprimer",onClick:()=>{ae({}),p(e)},style:"danger",icon:u(pe,{color:"#fff",size:"12"})})))))}async function Ee(e,t,n){e.preventDefault(),ae({});try{const e=await fetch(`/api/${n}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")||""}`},body:JSON.stringify(t)}),o=await e.json();o.token&&window.localStorage.setItem("token",o.token),ae({type:o.type,message:o.message}),"succes"===o.type&&window.setTimeout((()=>window.location.reload()),2e3)}catch{ae({message:"Erreur"})}}function He({type:e="create"}){const[t,n]=X("Rédiger votre message"),[o,r]=X({id:null,title:"",content:"",file:null,imgUrl:null}),i=function(e){return B=5,ee((function(){return{current:e}}),[])}();function l({currentTarget:e}){const{value:t,name:n}=e;r({...o,[n]:t.trim()})}return Y((()=>{"update"===e?(r(function(){const e={},t=document.querySelector("messages-render");return t&&(e.id=t.getAttribute("id"),e.title=t.getAttribute("title"),e.imgUrl=t.getAttribute("image"),e.content=t.getAttribute("text")),e}()),n("Modifier le message")):n("Rédiger votre message")}),[e]),u(_,null,u("form",{className:"wapper-content",onSubmit:e=>async function(e,t){e.preventDefault(),ae({});const n=new FormData;n.append("title",t.title),n.append("content",t.content),n.append("image",t.file);try{const e=await fetch("/api/message"+(t.id?"/"+t.id:""),{method:t.id?"PUT":"POST",headers:{Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")||""}`},body:n}),o=await e.json();ae({type:o.type,message:o.message}),"succes"===o.type&&(ue(),we.emit("messages",o))}catch{ae({message:"Erreur"})}}(e,o)},u("h1",null,t),u(xe,{type:"text",name:"title",label:"Titre :",value:o.title,onChange:l}),u("input",{type:"file",name:"image",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",ref:i,onChange:function({target:e}){const t=e.files[0];if(function(e){return["jpg","jpeg","png","gif","webp"].indexOf(e)>-1}(t.name.split(".").pop().toLowerCase())){const e=new FileReader;e.onloadend=()=>{r({...o,file:t,imgUrl:e.result})},e.readAsDataURL(t)}else ae({message:"Le fichier n'est pas accepté"})},style:{display:"none"}}),o.imgUrl&&"null"!==o.imgUrl?u("div",{className:"preview",onClick:()=>r({...o,file:null,imgUrl:null})},u("img",{src:o.imgUrl,alt:""})):u("div",{className:"drop-files",onClick:()=>{i.current.click(),ae({})}},u("p",null,"Choisissez votre image",u("br",null),"(Optionnel)")),u(xe,{type:"textarea",name:"content",label:"Contenu :",value:o.content,onChange:l}),u(Se,{type:"submit",title:"Envoyer"})))}function Le(){const[e,t]=X({email:"",password:""});function n({currentTarget:n}){const{value:o,name:r}=n;t({...e,[r]:o})}return u(_,null,u("form",{onSubmit:t=>Ee(t,e,"user/login"),className:"wapper-content"},u("h1",null,"Connexion"),u(xe,{type:"email",name:"email",label:"E-mail",placeholder:"user@groupomania.com",value:e.email,onChange:n,required:!0}),u(xe,{type:"password",name:"password",label:"Mot de passe",placeholder:"password",value:e.password,onChange:n,required:!0}),u(Se,{type:"submit",title:"Envoyer"})))}function ze({id:e}){return u(_,null,u("h1",null,"Compte"),u("div",{className:"wapper-logout"},u(Se,{title:"Se déconnecter",onClick:()=>(window.localStorage.removeItem("token"),document.querySelector("side-nav")?.removeAttribute("identify"),document.querySelector("messages-render")?.removeAttribute("data"),ue("Connexion"),void we.disconnect())}),u(Se,{title:"Supprimer le compte",style:"danger",onClick:t=>async function(e,t){e.preventDefault(),ae({});try{const e=await fetch(`/api/user/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")||""}`}}),n=await e.json();ae({type:n.type,message:n.message}),"succes"===n.type&&(ue("Connexion"),window.localStorage.removeItem("token"),document.querySelector("messages-render")?.removeAttribute("data"),document.querySelector("side-nav")?.removeAttribute("identify"),we.emit("messages",n))}catch{ae({message:"Erreur"})}}(t,e)})))}function Ne(){const[e,t]=X({lastName:"",firstName:"",email:"",password:""});function n({currentTarget:n}){const{value:o,name:r}=n;t({...e,[r]:o})}return u(_,null,u("form",{onSubmit:t=>Ee(t,e,"user/signup"),className:"wapper-content"},u("h1",null,"Inscription"),u(xe,{type:"text",name:"firstName",label:"Prénom",value:e.firstName,onChange:n,required:!0}),u(xe,{type:"text",name:"lastName",label:"Nom de famille",value:e.lastName,onChange:n,required:!0}),u(xe,{type:"email",name:"email",label:"E-mail",value:e.email,onChange:n,required:!0}),u(xe,{type:"password",name:"password",label:"Mot de passe",value:e.password,onChange:n,required:!0}),u(Se,{type:"submit",title:"Envoyer"})))}function Te({users:e,usersConnect:t}){return u(_,null,u("h1",null,"Utilisateurs"),u("h2",null,"En ligne :"),t?.map((e=>u("p",null,"- ",e.username))),u("h2",null,"Liste des utilisateurs :"),e?.map((e=>u("p",null,"- ",e.username))))}V((function({active:e,identify:t}){const n=["Messages","Rédaction","Utilisateurs","Compte"],o=["Connexion","Inscription"],[r,i]=X(null),[l,a]=X(!1),{width:s}=function(){const[e,t]=X(be());return Y((()=>{function e(){t(be())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}();return Y((()=>{se({render:e})}),[e]),Y((()=>{i(t?n:o)}),[t]),u(_,null,u("div",{className:"menu-mobile",onClick:()=>a(!l)},u(me,{size:"50",color:"#fff"})),u("nav",{className:l&&s<880?"visible":""},u("ul",null,r?.map(((t,n)=>{const o=["side-menu"];return t===e&&o.push("side-menu-active"),u("li",{key:n},u("a",{className:o.join(" "),onClick:()=>{ue(t),a(!1)}},u("div",{className:"side-menu-title"},t)))})))))}),"side-nav",["active","identify"]),V((function({render:e,data:t}){const[n,o]=X(null),[r,i]=X(!0),[l,a]=X(null),[s,c]=X(null),[p,d]=X(null),f=ke();async function m(e){const t=[...n];o(n.filter((t=>t.id!==e)));try{const n=await fetch(`/api/message/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")||""}`}}),r=await n.json();ae({type:r.type,message:r.message}),"succes"===r.type&&we.emit("messages",r),"error"===r.type&&o(t)}catch{ae({message:"Erreur"})}}Z((()=>{we.on("users.list",(({users:e})=>{d(e)})),we.on("users.leave",(({user:e})=>{const t=[];p&&p.forEach((n=>{n.id!==e.id&&t.push(n)})),d(t)})),we.on("messages.list",(e=>{c(e)})),we.on("likes.list",(e=>{c(e)})),we.on("comments.list",(e=>{c(e)}))}),[p]),Y((()=>{f&&fetch("/api/message",{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")}`}}).then((e=>e.json().then((e=>{o(e.data),i(!1),ue("Messages",!0)})))).catch((()=>{window.localStorage.removeItem("token"),ae({type:"error",message:"Vous n'êtes pas connecté"})}))}),[t,s]),Y((()=>{f&&fetch("/api/user",{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${window.localStorage.getItem("token")}`}}).then((e=>e.json().then((e=>{a(e.data)}))))}),[t,s]);const h=function(e,t){return B=8,ee((function(){return e}),t)}((()=>u(_,null,u("h1",null,"Bienvenu sur le réseau sociaux Groupomania"),r&&u("p",null,"Veuillez patienter ...."),n?.map(((e,t)=>u(Ae,{key:t,id:e.id,user:e.user,userId:f.userId,admin:f.admin,date:e.createdAt.slice(0,10),likes:e.likes,comments:e.comments,title:e.title,image:e.imageUrl,text:e.content,deleteArticle:m}))))),[n]);switch(e){case"Connexion":return f?u(ze,{id:f.userId}):u(Le,null);case"Inscription":return f?u(ze,{id:f.userId}):u(Ne,null);case"Compte":return f?u(ze,{id:f.userId}):u(Le,null);case"Rédaction":return u(f?He:Le,null);case"Modification":return f?u(He,{type:"update"}):u(Le,null);case"Utilisateurs":return f?u(Te,{usersConnect:p,users:l}):u(Le,null);default:return u(f?h:Le,null)}}),"messages-render",["render","data"]),V((function({type:e,message:t}){const[n,o]=X(!1);return Y((()=>{o(!(!e||!t));const n=window.setTimeout((()=>o(!1)),5e3);return()=>clearTimeout(n)}),[e,t]),!0===n?u("div",{className:`alert ${e}`},u("p",null,t)):void 0}),"alert-render",["type","message"]),V((function(){const[e,t]=X(!1),[n,o]=X(null);return Y((()=>{we.on("users.new",(({user:e})=>{t(!0),o(e.username+" vient de se connecter")})),we.on("users.leave",(({user:e})=>{t(!0),o(e.username+" vient de se déconnecter")}))}),[]),Y((()=>{const e=window.setTimeout((()=>t(!1)),5e3);return()=>{clearTimeout(e),we.on("disconnect")}}),[e]),!0===e?u("div",{className:"alert"},u("p",null,n)):void 0}),"info-render",["title","content"]);
